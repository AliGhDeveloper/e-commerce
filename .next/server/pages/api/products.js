"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/products";
exports.ids = ["pages/api/products"];
exports.modules = {

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "(api)/./middlewares/auth.js":
/*!*****************************!*\
  !*** ./middlewares/auth.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ auth)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var models_UsersModel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! models/UsersModel */ \"(api)/./models/UsersModel.js\");\n\n\nasync function auth(req, res) {\n    const token = req.headers.authorization;\n    if (!token) return res.status(401).json({\n        error: \"unAthenticated user!\"\n    });\n    try {\n        const verify = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, process.env.ACCESS_TOKEN_SECRET);\n        if (!verify) return res.status(401).json({\n            error: \"invalid Token!\"\n        });\n        const userId = verify._id;\n        const user = await models_UsersModel__WEBPACK_IMPORTED_MODULE_1__[\"default\"].findOne({\n            _id: userId\n        });\n        return user;\n    } catch (error) {\n        console.log(error.message);\n        return res.status(401).json({\n            error: \"please refresh the page and try again!\"\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9taWRkbGV3YXJlcy9hdXRoLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0I7QUFDTztBQUV2QixlQUFlRSxJQUFJLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO0lBQ3pDLE1BQU1DLEtBQUssR0FBR0YsR0FBRyxDQUFDRyxPQUFPLENBQUNDLGFBQWE7SUFDdkMsSUFBRyxDQUFDRixLQUFLLEVBQUUsT0FBT0QsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBRTtRQUFFQyxLQUFLLEVBQUUsc0JBQXNCO0tBQUUsQ0FBRSxDQUFDO0lBRTVFLElBQUk7UUFDQSxNQUFNQyxNQUFNLEdBQUdYLDBEQUFVLENBQUNLLEtBQUssRUFBRU8sT0FBTyxDQUFDQyxHQUFHLENBQUNDLG1CQUFtQixDQUFDO1FBQ2pFLElBQUcsQ0FBQ0gsTUFBTSxFQUFFLE9BQU9QLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUU7WUFBRUMsS0FBSyxFQUFFLGdCQUFnQjtTQUFDLENBQUM7UUFFcEUsTUFBTUssTUFBTSxHQUFHSixNQUFNLENBQUNLLEdBQUc7UUFFekIsTUFBTUMsSUFBSSxHQUFHLE1BQU1oQixpRUFBYSxDQUFFO1lBQUVlLEdBQUcsRUFBR0QsTUFBTTtTQUFFLENBQUU7UUFFcEQsT0FBT0UsSUFBSTtLQUNkLENBQUMsT0FBT1AsS0FBSyxFQUFHO1FBQ2JTLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDVixLQUFLLENBQUNXLE9BQU8sQ0FBQztRQUMxQixPQUFPakIsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztZQUFDQyxLQUFLLEVBQUUsd0NBQXdDO1NBQUMsQ0FBQztLQUNqRjtDQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZS1jb21tZXJjZS8uL21pZGRsZXdhcmVzL2F1dGguanM/ZTc3OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XHJcbmltcG9ydCBVc2VycyBmcm9tICdtb2RlbHMvVXNlcnNNb2RlbCc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBhdXRoKHJlcSwgcmVzKSB7XHJcbiAgICBjb25zdCB0b2tlbiA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb247XHJcbiAgICBpZighdG9rZW4pIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbiggeyBlcnJvcjogXCJ1bkF0aGVudGljYXRlZCB1c2VyIVwiIH0gKTtcclxuICAgIFxyXG4gICAgdHJ5IHsgXHJcbiAgICAgICAgY29uc3QgdmVyaWZ5ID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuQUNDRVNTX1RPS0VOX1NFQ1JFVCk7XHJcbiAgICAgICAgaWYoIXZlcmlmeSkgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKCB7IGVycm9yOiBcImludmFsaWQgVG9rZW4hXCJ9KVxyXG5cclxuICAgICAgICBjb25zdCB1c2VySWQgPSB2ZXJpZnkuX2lkO1xyXG5cclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlcnMuZmluZE9uZSggeyBfaWQgOiB1c2VySWQgfSApO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIHVzZXJcclxuICAgIH0gY2F0Y2goIGVycm9yICkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtlcnJvcjogJ3BsZWFzZSByZWZyZXNoIHRoZSBwYWdlIGFuZCB0cnkgYWdhaW4hJ30pXHJcbiAgICB9ICAgXHJcbn1cclxuIl0sIm5hbWVzIjpbImp3dCIsIlVzZXJzIiwiYXV0aCIsInJlcSIsInJlcyIsInRva2VuIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJ2ZXJpZnkiLCJwcm9jZXNzIiwiZW52IiwiQUNDRVNTX1RPS0VOX1NFQ1JFVCIsInVzZXJJZCIsIl9pZCIsInVzZXIiLCJmaW5kT25lIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./middlewares/auth.js\n");

/***/ }),

/***/ "(api)/./models/ProductsModel.js":
/*!*********************************!*\
  !*** ./models/ProductsModel.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst schema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    title: {\n        type: String,\n        required: true\n    },\n    category: {\n        type: String,\n        required: true\n    },\n    description: {\n        type: String,\n        required: true\n    },\n    content: {\n        type: String,\n        required: true\n    },\n    price: {\n        type: Number,\n        required: true\n    },\n    inStock: {\n        type: Number,\n        default: 0\n    },\n    sold: {\n        type: Number,\n        default: 0\n    },\n    content: {\n        type: String,\n        default: \"user\"\n    },\n    images: {\n        type: Array,\n        required: true\n    },\n    checked: {\n        type: Boolean,\n        default: false\n    }\n}, {\n    timestamps: true\n});\nlet Dataset = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models.Product) || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Product\", schema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Dataset);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvUHJvZHVjdHNNb2RlbC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsTUFBTSxHQUFHLElBQUlELHdEQUFlLENBQUM7SUFDL0JHLEtBQUssRUFBRztRQUNKQyxJQUFJLEVBQUdDLE1BQU07UUFDYkMsUUFBUSxFQUFHLElBQUk7S0FDbEI7SUFDREMsUUFBUSxFQUFFO1FBQ05ILElBQUksRUFBRUMsTUFBTTtRQUNaQyxRQUFRLEVBQUUsSUFBSTtLQUNqQjtJQUNERSxXQUFXLEVBQUc7UUFDVkosSUFBSSxFQUFHQyxNQUFNO1FBQ2JDLFFBQVEsRUFBRyxJQUFJO0tBQ2xCO0lBQ0RHLE9BQU8sRUFBRztRQUNOTCxJQUFJLEVBQUdDLE1BQU07UUFDYkMsUUFBUSxFQUFHLElBQUk7S0FDbEI7SUFDREksS0FBSyxFQUFHO1FBQ0pOLElBQUksRUFBR08sTUFBTTtRQUNiTCxRQUFRLEVBQUcsSUFBSTtLQUNsQjtJQUNETSxPQUFPLEVBQUc7UUFDTlIsSUFBSSxFQUFHTyxNQUFNO1FBQ2JFLE9BQU8sRUFBRyxDQUFDO0tBQ2Q7SUFDREMsSUFBSSxFQUFHO1FBQ0hWLElBQUksRUFBR08sTUFBTTtRQUNiRSxPQUFPLEVBQUcsQ0FBQztLQUNkO0lBQ0RKLE9BQU8sRUFBRztRQUNOTCxJQUFJLEVBQUdDLE1BQU07UUFDYlEsT0FBTyxFQUFHLE1BQU07S0FDbkI7SUFDREUsTUFBTSxFQUFHO1FBQ0xYLElBQUksRUFBR1ksS0FBSztRQUNaVixRQUFRLEVBQUcsSUFBSTtLQUNsQjtJQUNEVyxPQUFPLEVBQUc7UUFDTmIsSUFBSSxFQUFHYyxPQUFPO1FBQ2RMLE9BQU8sRUFBRyxLQUFLO0tBQ2xCO0NBRUosRUFBQztJQUNFTSxVQUFVLEVBQUcsSUFBSTtDQUNwQixDQUFDO0FBRUYsSUFBSUMsT0FBTyxHQUFHcEIsZ0VBQXVCLElBQUlBLHFEQUFjLENBQUMsU0FBUyxFQUFFQyxNQUFNLENBQUM7QUFFMUUsaUVBQWVtQixPQUFPLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9lLWNvbW1lcmNlLy4vbW9kZWxzL1Byb2R1Y3RzTW9kZWwuanM/NjAwYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XHJcblxyXG5jb25zdCBzY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcclxuICAgIHRpdGxlIDoge1xyXG4gICAgICAgIHR5cGUgOiBTdHJpbmcsXHJcbiAgICAgICAgcmVxdWlyZWQgOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgY2F0ZWdvcnk6IHsgXHJcbiAgICAgICAgdHlwZTogU3RyaW5nLFxyXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgZGVzY3JpcHRpb24gOiB7XHJcbiAgICAgICAgdHlwZSA6IFN0cmluZyxcclxuICAgICAgICByZXF1aXJlZCA6IHRydWVcclxuICAgIH0sXHJcbiAgICBjb250ZW50IDoge1xyXG4gICAgICAgIHR5cGUgOiBTdHJpbmcsXHJcbiAgICAgICAgcmVxdWlyZWQgOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgcHJpY2UgOiB7XHJcbiAgICAgICAgdHlwZSA6IE51bWJlcixcclxuICAgICAgICByZXF1aXJlZCA6IHRydWVcclxuICAgIH0sXHJcbiAgICBpblN0b2NrIDoge1xyXG4gICAgICAgIHR5cGUgOiBOdW1iZXIsXHJcbiAgICAgICAgZGVmYXVsdCA6IDBcclxuICAgIH0sXHJcbiAgICBzb2xkIDoge1xyXG4gICAgICAgIHR5cGUgOiBOdW1iZXIsXHJcbiAgICAgICAgZGVmYXVsdCA6IDBcclxuICAgIH0sXHJcbiAgICBjb250ZW50IDoge1xyXG4gICAgICAgIHR5cGUgOiBTdHJpbmcsXHJcbiAgICAgICAgZGVmYXVsdCA6ICd1c2VyJ1xyXG4gICAgfSxcclxuICAgIGltYWdlcyA6IHtcclxuICAgICAgICB0eXBlIDogQXJyYXksXHJcbiAgICAgICAgcmVxdWlyZWQgOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgY2hlY2tlZCA6IHtcclxuICAgICAgICB0eXBlIDogQm9vbGVhbixcclxuICAgICAgICBkZWZhdWx0IDogZmFsc2VcclxuICAgIH1cclxuXHJcbn0se1xyXG4gICAgdGltZXN0YW1wcyA6IHRydWVcclxufSk7XHJcblxyXG5sZXQgRGF0YXNldCA9IG1vbmdvb3NlLm1vZGVscy5Qcm9kdWN0IHx8IG1vbmdvb3NlLm1vZGVsKCdQcm9kdWN0Jywgc2NoZW1hKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IERhdGFzZXQ7Il0sIm5hbWVzIjpbIm1vbmdvb3NlIiwic2NoZW1hIiwiU2NoZW1hIiwidGl0bGUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJjYXRlZ29yeSIsImRlc2NyaXB0aW9uIiwiY29udGVudCIsInByaWNlIiwiTnVtYmVyIiwiaW5TdG9jayIsImRlZmF1bHQiLCJzb2xkIiwiaW1hZ2VzIiwiQXJyYXkiLCJjaGVja2VkIiwiQm9vbGVhbiIsInRpbWVzdGFtcHMiLCJEYXRhc2V0IiwibW9kZWxzIiwiUHJvZHVjdCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/ProductsModel.js\n");

/***/ }),

/***/ "(api)/./models/UsersModel.js":
/*!******************************!*\
  !*** ./models/UsersModel.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst schema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    email: {\n        type: String,\n        required: true\n    },\n    password: {\n        type: String,\n        required: true\n    },\n    root: {\n        type: Boolean,\n        default: false\n    },\n    date: {\n        type: Date,\n        default: Date.now()\n    },\n    role: {\n        type: String,\n        default: \"user\"\n    },\n    avatar: {\n        type: String,\n        default: \"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y\"\n    }\n}, {\n    timestamps: true\n});\nlet Dataset = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models.Users) || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Users\", schema);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Dataset);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvVXNlcnNNb2RlbC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsTUFBTSxHQUFHLElBQUlELHdEQUFlLENBQUM7SUFDL0JHLEtBQUssRUFBRztRQUNKQyxJQUFJLEVBQUdDLE1BQU07UUFDYkMsUUFBUSxFQUFHLElBQUk7S0FDbEI7SUFDREMsUUFBUSxFQUFHO1FBQ1BILElBQUksRUFBR0MsTUFBTTtRQUNiQyxRQUFRLEVBQUcsSUFBSTtLQUNsQjtJQUNERSxJQUFJLEVBQUU7UUFDRkosSUFBSSxFQUFHSyxPQUFPO1FBQ2RDLE9BQU8sRUFBRyxLQUFLO0tBQ2xCO0lBQ0RDLElBQUksRUFBRTtRQUNGUCxJQUFJLEVBQUdRLElBQUk7UUFDWEYsT0FBTyxFQUFHRSxJQUFJLENBQUNDLEdBQUcsRUFBRTtLQUN2QjtJQUNEQyxJQUFJLEVBQUc7UUFDSFYsSUFBSSxFQUFHQyxNQUFNO1FBQ2JLLE9BQU8sRUFBRyxNQUFNO0tBQ25CO0lBQ0RLLE1BQU0sRUFBRztRQUNMWCxJQUFJLEVBQUdDLE1BQU07UUFDYkssT0FBTyxFQUFHLDJFQUEyRTtLQUN4RjtDQUVKLEVBQUM7SUFDRU0sVUFBVSxFQUFHLElBQUk7Q0FDcEIsQ0FBQztBQUVGLElBQUlDLE9BQU8sR0FBR2pCLDhEQUFxQixJQUFJQSxxREFBYyxDQUFDLE9BQU8sRUFBRUMsTUFBTSxDQUFDO0FBRXRFLGlFQUFlZ0IsT0FBTyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZS1jb21tZXJjZS8uL21vZGVscy9Vc2Vyc01vZGVsLmpzPzFhM2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3Qgc2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgICBlbWFpbCA6IHtcclxuICAgICAgICB0eXBlIDogU3RyaW5nLFxyXG4gICAgICAgIHJlcXVpcmVkIDogdHJ1ZVxyXG4gICAgfSxcclxuICAgIHBhc3N3b3JkIDoge1xyXG4gICAgICAgIHR5cGUgOiBTdHJpbmcsXHJcbiAgICAgICAgcmVxdWlyZWQgOiB0cnVlXHJcbiAgICB9LFxyXG4gICAgcm9vdDogeyBcclxuICAgICAgICB0eXBlIDogQm9vbGVhbixcclxuICAgICAgICBkZWZhdWx0IDogZmFsc2VcclxuICAgIH0sXHJcbiAgICBkYXRlOiB7XHJcbiAgICAgICAgdHlwZSA6IERhdGUsXHJcbiAgICAgICAgZGVmYXVsdCA6IERhdGUubm93KClcclxuICAgIH0sXHJcbiAgICByb2xlIDoge1xyXG4gICAgICAgIHR5cGUgOiBTdHJpbmcsXHJcbiAgICAgICAgZGVmYXVsdCA6ICd1c2VyJ1xyXG4gICAgfSxcclxuICAgIGF2YXRhciA6IHtcclxuICAgICAgICB0eXBlIDogU3RyaW5nLFxyXG4gICAgICAgIGRlZmF1bHQgOiBcImh0dHBzOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIvMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA/ZD1tcCZmPXlcIlxyXG4gICAgfVxyXG5cclxufSx7XHJcbiAgICB0aW1lc3RhbXBzIDogdHJ1ZVxyXG59KTtcclxuXHJcbmxldCBEYXRhc2V0ID0gbW9uZ29vc2UubW9kZWxzLlVzZXJzIHx8IG1vbmdvb3NlLm1vZGVsKCdVc2VycycsIHNjaGVtYSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBEYXRhc2V0OyJdLCJuYW1lcyI6WyJtb25nb29zZSIsInNjaGVtYSIsIlNjaGVtYSIsImVtYWlsIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwicGFzc3dvcmQiLCJyb290IiwiQm9vbGVhbiIsImRlZmF1bHQiLCJkYXRlIiwiRGF0ZSIsIm5vdyIsInJvbGUiLCJhdmF0YXIiLCJ0aW1lc3RhbXBzIiwiRGF0YXNldCIsIm1vZGVscyIsIlVzZXJzIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./models/UsersModel.js\n");

/***/ }),

/***/ "(api)/./pages/api/products/index.js":
/*!*************************************!*\
  !*** ./pages/api/products/index.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var models_ProductsModel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! models/ProductsModel */ \"(api)/./models/ProductsModel.js\");\n/* harmony import */ var utils_Db_connection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils/Db_connection */ \"(api)/./utils/Db_connection.js\");\n/* harmony import */ var middlewares_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! middlewares/auth */ \"(api)/./middlewares/auth.js\");\n\n\n\n(0,utils_Db_connection__WEBPACK_IMPORTED_MODULE_1__.Db_connect)();\nfunction handler(req, res) {\n    switch(req.method){\n        case \"GET\":\n            return getProducts(req, res);\n        case \"POST\":\n            return createProduct(req, res);\n        case \"DELETE\":\n            return deleteProducts(req, res);\n    }\n};\n;\nclass FeaturesAPI {\n    constructor(query, queryString){\n        this.query = query;\n        this.queryString = queryString;\n    }\n    filtering() {\n        const queryObj = {\n            ...this.queryString\n        };\n        const excludeFields = [\n            \"limit\",\n            \"sort\",\n            \"page\"\n        ];\n        excludeFields.forEach((field)=>delete queryObj[field]);\n        if (queryObj.category !== \"all\") {\n            this.query.find({\n                category: queryObj.category\n            });\n        }\n        if (queryObj.title !== \"all\") {\n            this.query.find({\n                title: {\n                    $regex: queryObj.title\n                }\n            });\n        }\n        return this;\n    }\n    sorting() {\n        if (this.queryString.sort) {\n            const sortBy = this.queryString.sort.split(\",\").join(\"\");\n            this.query.sort(sortBy);\n        } else {\n            this.query.sort(\"-createdAt\");\n        }\n        return this;\n    }\n    pagination() {\n        const page = this.queryString.page * 1 || 1;\n        const limit = this.queryString.limit * 1 || 3;\n        const skip = (page - 1) * limit;\n        this.query.skip(skip).limit(limit + 1);\n        return this;\n    }\n}\nasync function getProducts(req, res) {\n    const feature = new FeaturesAPI(models_ProductsModel__WEBPACK_IMPORTED_MODULE_0__[\"default\"].find(), req.query).pagination().filtering().sorting();\n    try {\n        const products = await feature.query;\n        console.log(products);\n        if (products.length > 3) return res.status(200).json({\n            products: products.slice(0, 3),\n            more: true\n        });\n        return res.status(200).json(products);\n    } catch (error) {\n        console.log(error);\n    }\n}\n;\nasync function createProduct(req, res) {\n    const { images , category , title , description , content , inStock , price  } = req.body;\n    if (!title || !category || category === \"all\" || !description || !content || !inStock || !price) return res.status(400).json({\n        error: \"please add all fields\"\n    });\n    if (images.length === 0) return res.status(400).json({\n        error: \"please select at least one image\"\n    });\n    try {\n        const user = await (0,middlewares_auth__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(req, res);\n        if (user.role !== \"admin\") return res.status(401).json({\n            error: \"authentication error\"\n        });\n        const newProduct = new models_ProductsModel__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n            category,\n            title: title.toLowerCase(),\n            description,\n            content,\n            inStock,\n            price,\n            images\n        });\n        await newProduct.save();\n        return res.status(200).json({\n            success: \"product created successfully\"\n        });\n    } catch (error) {\n        console.log(error);\n    }\n}\n;\nasync function deleteProducts(req, res) {\n    try {\n        const items = req.body;\n        if (!items) return res.status(400).json({\n            error: \"no items to delete\"\n        });\n        const user = await (0,middlewares_auth__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(req, res);\n        if (user.role !== \"admin\") return res.status(401).json({\n            error: \"authentication error\"\n        });\n        items.forEach(async (item)=>{\n            await models_ProductsModel__WEBPACK_IMPORTED_MODULE_0__[\"default\"].findOneAndDelete({\n                _id: item\n            });\n        });\n        return res.status(200).json({\n            success: \"deleted all\"\n        });\n    } catch (error) {\n        console.log({\n            error: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNFLEdBQUcsRUFBQ0MsR0FBRyxDQUFDO1FBQ2hDLElBQUcyQyxJQUFJLENBQUNDLElBQUksS0FBSyxPQUFPLEVBQUUsT0FBTzVDLEdBQUcsQ0FBQ2dDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1lBQUVHLEtBQUssRUFBRSxzQkFBc0I7U0FBQyxDQUFDLENBQUM7UUFFeEZhLEtBQUssQ0FBQ3JDLE9BQU8sQ0FBQyxPQUFNc0MsSUFBSSxHQUFLO1lBQ3pCLE1BQU12RCw2RUFBeUIsQ0FBQztnQkFBRXlELEdBQUcsRUFBR0YsSUFBSTthQUFFLENBQUM7U0FDbEQsQ0FBQztRQUVGLE9BQU9sRCxHQUFHLENBQUNnQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztZQUFDZSxPQUFPLEVBQUUsYUFBYTtTQUFDLENBQUM7S0FDeEQsQ0FBQyxPQUFNWixLQUFLLEVBQUU7UUFDWFAsT0FBTyxDQUFDQyxHQUFHLENBQUM7WUFBRU0sS0FBSyxFQUFFQSxLQUFLLENBQUNpQixPQUFPO1NBQUUsQ0FBQztLQUN4QztDQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZS1jb21tZXJjZS8uL3BhZ2VzL2FwaS9wcm9kdWN0cy9pbmRleC5qcz81OTczIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9kdWN0cyBmcm9tICdtb2RlbHMvUHJvZHVjdHNNb2RlbCc7XHJcbmltcG9ydCB7IERiX2Nvbm5lY3QgfSBmcm9tICd1dGlscy9EYl9jb25uZWN0aW9uJztcclxuaW1wb3J0IGF1dGggZnJvbSAnbWlkZGxld2FyZXMvYXV0aCc7XHJcblxyXG5EYl9jb25uZWN0KCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKXtcclxuICAgIHN3aXRjaChyZXEubWV0aG9kKSB7XHJcbiAgICAgICAgY2FzZSAnR0VUJzpcclxuICAgICAgICAgICAgcmV0dXJuIGdldFByb2R1Y3RzKHJlcSwgcmVzKTtcclxuICAgICAgICBjYXNlICdQT1NUJzpcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVByb2R1Y3QocmVxLCByZXMpO1xyXG4gICAgICAgIGNhc2UgJ0RFTEVURSc6XHJcbiAgICAgICAgcmV0dXJuIGRlbGV0ZVByb2R1Y3RzKHJlcSwgcmVzKTtcclxuICAgIH1cclxufTtcclxuXHJcbmNsYXNzIEZlYXR1cmVzQVBJIHtcclxuICAgIGNvbnN0cnVjdG9yKCBxdWVyeSwgcXVlcnlTdHJpbmcgKXtcclxuICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XHJcbiAgICAgICAgdGhpcy5xdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZpbHRlcmluZygpIHtcclxuICAgICAgICBjb25zdCBxdWVyeU9iaiA9IHsuLi50aGlzLnF1ZXJ5U3RyaW5nfTtcclxuXHJcbiAgICAgICAgY29uc3QgZXhjbHVkZUZpZWxkcyA9IFsnbGltaXQnLCAnc29ydCcsICdwYWdlJ107XHJcbiAgICAgICAgZXhjbHVkZUZpZWxkcy5mb3JFYWNoKCBmaWVsZCA9PiBkZWxldGUocXVlcnlPYmpbZmllbGRdKSlcclxuICAgICAgICBcclxuICAgICAgICBpZihxdWVyeU9iai5jYXRlZ29yeSAhPT0gJ2FsbCcpeyBcclxuICAgICAgICAgICAgdGhpcy5xdWVyeS5maW5kKHtjYXRlZ29yeSA6IHF1ZXJ5T2JqLmNhdGVnb3J5fSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocXVlcnlPYmoudGl0bGUgIT09ICdhbGwnKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVlcnkuZmluZCh7IHRpdGxlIDogeyRyZWdleCA6IHF1ZXJ5T2JqLnRpdGxlfX0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgc29ydGluZygpIHsgXHJcbiAgICAgICAgaWYodGhpcy5xdWVyeVN0cmluZy5zb3J0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNvcnRCeSA9IHRoaXMucXVlcnlTdHJpbmcuc29ydC5zcGxpdCgnLCcpLmpvaW4oJycpO1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXJ5LnNvcnQoc29ydEJ5KVxyXG4gICAgICAgIH0gZWxzZSB7IFxyXG4gICAgICAgICAgICB0aGlzLnF1ZXJ5LnNvcnQoJy1jcmVhdGVkQXQnKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIHBhZ2luYXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgcGFnZSA9IHRoaXMucXVlcnlTdHJpbmcucGFnZSAqIDEgfHwgMTtcclxuICAgICAgICBjb25zdCBsaW1pdCA9IHRoaXMucXVlcnlTdHJpbmcubGltaXQgKiAxIHx8IDM7XHJcbiAgICAgICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcclxuICAgICAgICB0aGlzLnF1ZXJ5LnNraXAoc2tpcCkubGltaXQobGltaXQgKyAxKTtcclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRQcm9kdWN0cyggcmVxLCByZXMgKSB7XHJcbiAgICBjb25zdCBmZWF0dXJlID0gbmV3IEZlYXR1cmVzQVBJKFByb2R1Y3RzLmZpbmQoKSwgcmVxLnF1ZXJ5KS5wYWdpbmF0aW9uKCkuZmlsdGVyaW5nKCkuc29ydGluZygpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwcm9kdWN0cyA9IGF3YWl0IGZlYXR1cmUucXVlcnlcclxuICAgICAgICBjb25zb2xlLmxvZyhwcm9kdWN0cylcclxuICAgICAgICBpZihwcm9kdWN0cy5sZW5ndGggPiAzICkgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgcHJvZHVjdHMgOiBwcm9kdWN0cy5zbGljZSgwLDMpLCBtb3JlOiB0cnVlIH0pXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHByb2R1Y3RzKVxyXG4gICAgfSBjYXRjaCggZXJyb3IgKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcilcclxuICAgIH1cclxufTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVByb2R1Y3QoIHJlcSwgcmVzICkge1xyXG4gICAgY29uc3QgeyBpbWFnZXMsIGNhdGVnb3J5LCB0aXRsZSwgZGVzY3JpcHRpb24sIGNvbnRlbnQsIGluU3RvY2ssIHByaWNlIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICBpZiggIXRpdGxlIHx8ICFjYXRlZ29yeSB8fCBjYXRlZ29yeSA9PT0gJ2FsbCcgfHwgIWRlc2NyaXB0aW9uIHx8ICFjb250ZW50IHx8ICFpblN0b2NrIHx8ICFwcmljZSApIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbiggeyBlcnJvcjogJ3BsZWFzZSBhZGQgYWxsIGZpZWxkcyd9KVxyXG4gICAgXHJcbiAgICBpZihpbWFnZXMubGVuZ3RoID09PSAwKSByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oIHtlcnJvcjogJ3BsZWFzZSBzZWxlY3QgYXQgbGVhc3Qgb25lIGltYWdlJ30gKTtcclxuXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgYXV0aChyZXEsIHJlcyk7XHJcbiAgICAgICAgaWYoIHVzZXIucm9sZSAhPT0gJ2FkbWluJyApIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnYXV0aGVudGljYXRpb24gZXJyb3InIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBuZXdQcm9kdWN0ID0gbmV3IFByb2R1Y3RzKHsgY2F0ZWdvcnksIHRpdGxlIDogdGl0bGUudG9Mb3dlckNhc2UoKSwgZGVzY3JpcHRpb24sIGNvbnRlbnQsIGluU3RvY2ssIHByaWNlLCBpbWFnZXMgfSk7XHJcblxyXG4gICAgICAgIGF3YWl0IG5ld1Byb2R1Y3Quc2F2ZSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiAncHJvZHVjdCBjcmVhdGVkIHN1Y2Nlc3NmdWxseSd9KVxyXG5cclxuICAgIH0gY2F0Y2goIGVycm9yICl7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpXHJcbiAgICB9XHJcbn07XHJcblxyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVQcm9kdWN0cyhyZXEscmVzKXtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgaXRlbXMgPSByZXEuYm9keTtcclxuICAgICAgICBpZighaXRlbXMpIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7ZXJyb3I6ICdubyBpdGVtcyB0byBkZWxldGUnfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBhdXRoKHJlcSxyZXMpO1xyXG4gICAgICAgIGlmKHVzZXIucm9sZSAhPT0gJ2FkbWluJykgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdhdXRoZW50aWNhdGlvbiBlcnJvcid9KTtcclxuXHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaChhc3luYyhpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IFByb2R1Y3RzLmZpbmRPbmVBbmREZWxldGUoeyBfaWQgOiBpdGVtIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe3N1Y2Nlc3M6ICdkZWxldGVkIGFsbCd9KVxyXG4gICAgfSBjYXRjaChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSlcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJQcm9kdWN0cyIsIkRiX2Nvbm5lY3QiLCJhdXRoIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsImdldFByb2R1Y3RzIiwiY3JlYXRlUHJvZHVjdCIsImRlbGV0ZVByb2R1Y3RzIiwiRmVhdHVyZXNBUEkiLCJjb25zdHJ1Y3RvciIsInF1ZXJ5IiwicXVlcnlTdHJpbmciLCJmaWx0ZXJpbmciLCJxdWVyeU9iaiIsImV4Y2x1ZGVGaWVsZHMiLCJmb3JFYWNoIiwiZmllbGQiLCJjYXRlZ29yeSIsImZpbmQiLCJ0aXRsZSIsIiRyZWdleCIsInNvcnRpbmciLCJzb3J0Iiwic29ydEJ5Iiwic3BsaXQiLCJqb2luIiwicGFnaW5hdGlvbiIsInBhZ2UiLCJsaW1pdCIsInNraXAiLCJmZWF0dXJlIiwicHJvZHVjdHMiLCJjb25zb2xlIiwibG9nIiwibGVuZ3RoIiwic3RhdHVzIiwianNvbiIsInNsaWNlIiwibW9yZSIsImVycm9yIiwiaW1hZ2VzIiwiZGVzY3JpcHRpb24iLCJjb250ZW50IiwiaW5TdG9jayIsInByaWNlIiwiYm9keSIsInVzZXIiLCJyb2xlIiwibmV3UHJvZHVjdCIsInRvTG93ZXJDYXNlIiwic2F2ZSIsInN1Y2Nlc3MiLCJpdGVtcyIsIml0ZW0iLCJmaW5kT25lQW5kRGVsZXRlIiwiX2lkIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/products/index.js\n");

/***/ }),

/***/ "(api)/./utils/Db_connection.js":
/*!********************************!*\
  !*** ./utils/Db_connection.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Db_connect\": () => (/* binding */ Db_connect)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst Db_connect = ()=>{\n    if ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().connections[0].readyState)) {\n        console.log(\"Already connected\");\n        return;\n    }\n    mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(process.env.DB_CONNECTION, ()=>{\n        console.log(\"connected to mongodb\");\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi91dGlscy9EYl9jb25uZWN0aW9uLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUV6QixNQUFNQyxVQUFVLEdBQUcsSUFBTTtJQUM1QixJQUFHRCwyRUFBa0MsRUFBQztRQUNsQ0ksT0FBTyxDQUFDQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUNqQyxPQUFPO0tBQ1Y7SUFDREwsdURBQWdCLENBQUNPLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxhQUFhLEVBQUUsSUFBTTtRQUM5Q0wsT0FBTyxDQUFDQyxHQUFHLENBQUMsc0JBQXNCLENBQUM7S0FDdEMsQ0FBQztDQUVMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZS1jb21tZXJjZS8uL3V0aWxzL0RiX2Nvbm5lY3Rpb24uanM/NjIzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xyXG5cclxuZXhwb3J0IGNvbnN0IERiX2Nvbm5lY3QgPSAoKSA9PiB7XHJcbiAgICBpZihtb25nb29zZS5jb25uZWN0aW9uc1swXS5yZWFkeVN0YXRlKXtcclxuICAgICAgICBjb25zb2xlLmxvZygnQWxyZWFkeSBjb25uZWN0ZWQnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBtb25nb29zZS5jb25uZWN0KHByb2Nlc3MuZW52LkRCX0NPTk5FQ1RJT04sICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnY29ubmVjdGVkIHRvIG1vbmdvZGInKVxyXG4gICAgfSlcclxuXHJcbn0iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJEYl9jb25uZWN0IiwiY29ubmVjdGlvbnMiLCJyZWFkeVN0YXRlIiwiY29uc29sZSIsImxvZyIsImNvbm5lY3QiLCJwcm9jZXNzIiwiZW52IiwiREJfQ09OTkVDVElPTiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./utils/Db_connection.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/products/index.js"));
module.exports = __webpack_exports__;

})();