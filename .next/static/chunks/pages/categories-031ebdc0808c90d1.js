(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{5190:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/categories",function(){return c(8582)}])},8582:function(c,b,a){"use strict";a.r(b);var d=a(6042),e=a(9396),f=a(797),g=a(5893),h=a(9473),i=a(7294),j=a(843),k=a(5014);b.default=function(){var n=(0,i.useRef)(),t=(0,h.I0)(),b=(0,h.v9)(function(a){return a}),a=b.auth,c=b.categories,l=(0,i.useState)(""),o=l[0],u=l[1],m=(0,i.useState)(""),p=m[0],v=m[1];if(!a||a.user&&"admin"!==a.user.role)return null;var q=function(){if(a.user&&"admin"!==a.user.role)return t({type:"NOTIFY",payload:{error:"Only admins can add/update categories"}});p?(0,j.fP)("http://localhost:3000/api/categories/modify/".concat(p),{name:o},a.access_token).then(function(a){return a.json()}).then(function(a){if(a.error)return t({type:"NOTIFY",payload:a});t((0,k.$G)(c,p,(0,e.Z)((0,d.Z)({},a),{name:o}),"ADD_CAT"))}):(0,j.qC)("http://localhost:3000/api/categories",{name:o},a.access_token).then(function(a){return a.json()}).then(function(a){if(a.error)return t({type:"NOTIFY",payload:a});t({type:"ADD_CAT",payload:(0,f.Z)(c).concat([a])}),u("")})},r=function(){v(""),u(""),n.current.focus()},s=function(a){u(a.target.value)};return(0,g.jsxs)("div",{className:"container cats",children:[(0,g.jsxs)("div",{className:"col-md-8 my-4 mx-auto",children:[(0,g.jsxs)("div",{className:"form-group text-center d-flex",children:[(0,g.jsx)("input",{ref:n,type:"text",name:"category",value:o,className:"form-control",onChange:s,placeholder:"category name"}),(0,g.jsx)("button",{className:"btn btn-secondary",onClick:q,children:p?"Update":"Create"})]}),c&&c.map(function(b){return(0,g.jsx)("div",{className:"card",children:(0,g.jsxs)("div",{className:"card-body d-flex justify-content-between",children:[(0,g.jsx)("span",{children:b.name}),(0,g.jsxs)("div",{children:[(0,g.jsx)("i",{className:"text-primary fas fa-edit",onClick:function(){v(b._id),u(b.name)}}),(0,g.jsx)("i",{"data-toggle":"modal","data-target":"#exampleModal",onClick:function(){return t({type:"MODAL",payload:{title:b.name,state:c,item:b,actionType:"ADD_CAT",auth:a}})},className:"text-danger fas fa-trash-alt ml-3"})]})]})},b._id)})]}),(0,g.jsx)("div",{className:"row my-3 d-flex justify-content-center align-items-center",children:(0,g.jsx)("i",{className:"btn btn-success fas fa-plus",onClick:r})})]})}}},function(a){a.O(0,[774,888,179],function(){var b;return a(a.s=5190)}),_N_E=a.O()}])