(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[442],{2810:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/edit-user/[id]",function(){return c(1149)}])},1149:function(c,b,a){"use strict";a.r(b),a.d(b,{default:function(){return l}});var d=a(6042),e=a(9396),f=a(5893),g=a(9473),h=a(1163),i=a(7294),j=a(843),k=a(5014);function l(){var c=(0,g.v9)(function(a){return a}),b=c.auth,n=c.users,o=(0,h.useRouter)(),r=(0,g.I0)(),s=o.query.id,l=(0,i.useState)({}),a=l[0],t=l[1],m=(0,i.useState)(null),p=m[0],u=m[1];if((0,i.useEffect)(function(){n&&t(n.filter(function(a){return a._id===s})[0])},[n]),(0,i.useEffect)(function(){a&&u("admin"===a.role)},[a]),!b||b.user&&"admin"!==b.user.role)return null;var q=function(c){"admin"!==b.user.role||b.user.root?b.user._id===s?r({type:"NOTIFY",payload:{error:"root admins cannot commit changes for their own account"}}):(u(!p),(0,j.B6)("http://localhost:3000/api/users/changerole/".concat(a._id),{isAdmin:c.target.checked},b.access_token).then(function(a){return a.json()}).then(function(a){console.log(a)}),r((0,k.$G)(n,a._id,(0,e.Z)((0,d.Z)({},a),{role:c.target.checked?"admin":"user"}),"ADD_USERS"))):r({type:"NOTIFY",payload:{error:"you must be a root admin to commit changes"}})};return(0,f.jsx)(f.Fragment,{children:a&&(0,f.jsxs)("div",{className:"container",children:[(0,f.jsxs)("button",{className:"btn btn-secondary",onClick:function(){return o.back()},children:[(0,f.jsx)("i",{style:{zIndex:"102"},className:"text-white fas fa-arrow-left"}),"go back"]}),(0,f.jsxs)("div",{className:"col-md-8 my-3 mx-auto",children:[(0,f.jsx)("h2",{children:a._id}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"userEmail",className:"d-block",children:"Email:"}),(0,f.jsx)("input",{type:"text",name:"email",className:"form-control",disabled:!0,id:"userEmail",value:a.email})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"userAdmin",children:"IsAdmin"}),(0,f.jsx)("input",{type:"checkbox",checked:p,onChange:q})]})]})]})})}}},function(a){a.O(0,[774,888,179],function(){var b;return a(a.s=2810)}),_N_E=a.O()}])