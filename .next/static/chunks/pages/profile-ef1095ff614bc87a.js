(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{3454:function(d,e,a){"use strict";var b,c;d.exports=(null==(b=a.g.process)?void 0:b.env)&&"object"==typeof(null==(c=a.g.process)?void 0:c.env)?a.g.process:a(7663)},1969:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return c(7628)}])},7628:function(e,b,a){"use strict";a.r(b),a.d(b,{default:function(){return u}});var f=a(7568),g=a(4924),h=a(6042),i=a(9396),c=a(4051),j=a.n(c),k=a(5893),l=a(1163),m=a(7294),n=a(9473),o=a(3739),p=a(843),q=a(3454);function r(a){return s.apply(this,arguments)}function s(){return(s=(0,f.Z)(j().mark(function a(b){var c,d,e,f,g,h,i,k,l;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:c=[],d=!0,e=!1,f=void 0,a.prev=2,g=b[Symbol.iterator]();case 4:if(d=(h=g.next()).done){a.next=17;break}return i=h.value,(k=new FormData).append("file",i),k.append("upload_preset",q.env.CLOUD_PRESET),k.append("cloud_name",q.env.CLOUD_NAME),a.next=12,fetch("https://res.cloudinary.com/dgapvh64c/image/fetch/",{method:"POST",body:k});case 12:l=a.sent,console.log(l);case 14:d=!0,a.next=4;break;case 17:a.next=23;break;case 19:a.prev=19,a.t0=a.catch(2),e=!0,f=a.t0;case 23:a.prev=23,a.prev=24,d||null==g.return||g.return();case 26:if(a.prev=26,!e){a.next=29;break}throw f;case 29:return a.finish(26);case 30:return a.finish(23);case 31:case"end":return a.stop()}},a,null,[[2,19,23,31],[24,,26,30]])}))).apply(this,arguments)}var d=a(1664),t=a.n(d);function u(){var b=(0,n.v9)(function(a){return a}),a=b.auth,s=b.notify,d=b.orders,u={newPassword:"",cf_newPassword:"",email:a.user?a.user.email:""},e=(0,m.useState)(u),c=e[0],y=e[1],z=c.email,A=c.newPassword,B=c.cf_newPassword;(0,l.useRouter)();var C=(0,n.I0)();if(!a.user)return null;var v,D,w,q=function(b){var a=b.target,d=a.name,e=a.value;y((0,i.Z)((0,h.Z)({},c),(0,g.Z)({},d,e)))},x=(v=(0,f.Z)(j().mark(function a(){return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:E();case 1:case"end":return a.stop()}},a)})),function(){return v.apply(this,arguments)});(0,f.Z)(j().mark(function b(){var d,e,f;return j().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(d=(0,o.P0)(z,A,B))){b.next=3;break}return b.abrupt("return",C({type:"NOTIFY",payload:{error:d}}));case 3:return C({type:"NOTIFY",payload:{loading:"please wait..."}}),b.next=6,(0,p.B6)("http://localhost:3000/api/profile/changepass",c,a.access_token);case 6:return e=b.sent,b.next=9,e.json();case 9:if(!(f=b.sent).error){b.next=12;break}return b.abrupt("return",C({type:"NOTIFY",payload:f}));case 12:return b.abrupt("return",C({type:"NOTIFY",payload:{success:"your password changed successfully"}}));case 13:case"end":return b.stop()}},b)}));var E=(w=(0,f.Z)(j().mark(function a(){var b;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!("image/jpeg"!==(b=c.selectedFile[0]).type&&"image/png"!==b.type)){a.next=3;break}return a.abrupt("return",C({type:"NOTIFY",payload:{error:"file type must be jpeg or png"}}));case 3:C({type:"NOTIFY",payload:{loading:"please wait"}}),r(c.selectedFile);case 5:case"end":return a.stop()}},a)})),function(){return w.apply(this,arguments)});return(0,k.jsx)("div",{className:"container",children:(0,k.jsxs)("div",{className:"row my-5 ",children:[(0,k.jsxs)("div",{className:"col-md-4 px-4 py-4 bg-light",style:{borderRadius:"5px"},children:[(0,k.jsxs)("div",{className:"avatar",children:[(0,k.jsx)("img",{className:"profileImage",src:a.user.avatar,alt:a.user.avatar}),(0,k.jsxs)("span",{className:"text-center imageSpan",children:[(0,k.jsx)("span",{className:"cameraicon",children:(0,k.jsx)("i",{className:"fas fa-camera"})}),(0,k.jsx)("span",{className:"d-block ",id:"myspan",children:"change avatar"}),(0,k.jsx)("input",{type:"file",multiple:!1,name:"up_file",onChange:function(a){console.log(a.target.files),y((0,i.Z)((0,h.Z)({},c),{selectedFile:a.target.files}))}})]})]}),(0,k.jsxs)("div",{className:"changePassword",children:[(0,k.jsx)("input",{type:"email",className:"form-control my-2",disabled:!0,value:a.user.email}),(0,k.jsx)("h6",{children:"change password: "}),(0,k.jsx)("input",{type:"password",className:"form-control my-2",placeholder:"new password...",name:"newPassword",onChange:q}),(0,k.jsx)("input",{type:"password",className:"form-control my-2",placeholder:"confirm new password...",name:"cf_newPassword",onChange:q}),(0,k.jsx)("button",{className:"btn btn-secondary",onClick:x,disabled:s.loading,children:"update"})]})]}),(0,k.jsx)("div",{className:"col-md-8 p-4 bg-light table-responsive",children:d?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h2",{children:"Orders : "}),(0,k.jsxs)("table",{className:"table-bordered table-hover w-100",style:{minWidth:"600px"},children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"p-2",children:"ID"}),(0,k.jsx)("td",{className:"p-2",children:"date"}),(0,k.jsx)("td",{className:"p-2",children:"delivered"}),(0,k.jsx)("td",{className:"p-2",children:"paid"})]})}),(0,k.jsx)("tbody",{children:d.map(function(a){return(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"p-2",children:(0,k.jsx)(t(),{href:"http://localhost:3000/profile/orders/".concat(a._id),children:a._id})}),(0,k.jsx)("td",{className:"p-2",children:new Date(a.createdAt).toLocaleDateString()}),(0,k.jsx)("td",{className:"p-2",children:a.delivered?(0,k.jsx)("li",{className:"fas fa-check text-success"}):(0,k.jsx)("i",{className:"fas fa-times text-danger"})}),(0,k.jsx)("td",{className:"p-2",children:a.paid?(0,k.jsx)("li",{className:"fas fa-check text-success"}):(0,k.jsx)("i",{className:"fas fa-times text-danger"})})]},a._id)})})]})]}):(0,k.jsx)("h1",{children:" you have no orders"})})]})})}},3739:function(c,a,b){"use strict";b.d(a,{AD:function(){return g},Nj:function(){return f},P0:function(){return d}});var d=function(b,a,c){return b&&a&&c?e(b)?a.length<6?"password must be at least 6 characters":a!==c?"passwords are not the same":void 0:"email is invalid":"please add all fields!"},e=function(a){return String(a).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)},f=function(a,b){return a&&b?e(a)?b.length<6?"password must be at least 6 characters":void 0:"email is invalid":"please add all fields!"},g=function(b,a,c){return a&&b&&c?e(a)?void 0:"email is invalid":"please add all fields!"}},7663:function(a){!function(){var d={308:function(c){var e,f,g,a=c.exports={};function h(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function j(a){if(e===setTimeout)return setTimeout(a,0);if((e===h||!e)&&setTimeout)return e=setTimeout,setTimeout(a,0);try{return e(a,0)}catch(b){try{return e.call(null,a,0)}catch(c){return e.call(this,a,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:h}catch(a){e=h}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(b){f=i}}();var k=[],l=!1,m=-1;function n(){l&&g&&(l=!1,g.length?k=g.concat(k):m=-1,k.length&&o())}function o(){if(!l){var b=j(n);l=!0;for(var a=k.length;a;){for(g=k,k=[];++m<a;)g&&g[m].run();m=-1,a=k.length}g=null,l=!1,function(a){if(f===clearTimeout)return clearTimeout(a);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(a);try{f(a)}catch(b){try{return f.call(null,a)}catch(c){return f.call(this,a)}}}(b)}}function d(a,b){this.fun=a,this.array=b}function b(){}a.nextTick=function(c){var b=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)b[a-1]=arguments[a];k.push(new d(c,b)),1!==k.length||l||j(o)},d.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=b,a.addListener=b,a.once=b,a.off=b,a.removeListener=b,a.removeAllListeners=b,a.emit=b,a.prependListener=b,a.prependOnceListener=b,a.listeners=function(a){return[]},a.binding=function(a){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(a){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},e={};function b(a){var f=e[a];if(void 0!==f)return f.exports;var c=e[a]={exports:{}},g=!0;try{d[a](c,c.exports,b),g=!1}finally{g&&delete e[a]}return c.exports}b.ab="//";var c=b(308);a.exports=c}()}},function(a){a.O(0,[774,888,179],function(){var b;return a(a.s=1969)}),_N_E=a.O()}])